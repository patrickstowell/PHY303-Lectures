Traceback (most recent call last):
  File "/usr/local/lib/python3.11/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/usr/local/lib/python3.11/site-packages/nbclient/client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/jupyter_core/utils/__init__.py", line 168, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/Cellar/python@3.11/3.11.7_1/Frameworks/Python.framework/Versions/3.11/lib/python3.11/asyncio/base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/site-packages/nbclient/client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "/usr/local/lib/python3.11/site-packages/nbclient/client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/usr/local/lib/python3.11/site-packages/nbclient/client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import matplotlib.pyplot as plt
import numpy as np
import pandas as pd
import plotly.express as px
import plotly.graph_objects as go
from IPython.display import display, HTML
display(HTML("<style>.container { width:100% !important; }</style>"))
# the service URL
livechart = "https://nds.iaea.org/relnsd/v0/data?"
import urllib.request
def lc_pd_dataframe(url):
    req = urllib.request.Request(url)
    req.add_header('User-Agent', 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:77.0) Gecko/20100101 Firefox/77.0')
    return pd.read_csv(urllib.request.urlopen(req))
df = lc_pd_dataframe(livechart + "fields=ground_states&nuclides=all")
df["a"]=df["z"] + df["n"]
df["b_over_a"] = df["binding"]

print(df.columns)

import plotly.express as px
df["symbol"] = 3

df["Proton Number [Z]"] = df["z"]
df["Neutron Number [N]"] = df["n"]
df["Deficit [MeV]"] = -df["binding"]/1000.0
df["Odd Neutron"] = df["n"] % 2 == 1
df.loc[np.invert((df["decay_1"]).notna()), "decay_1"] = "STABLE"

df["Atomic Number [A]"] = df["z"]  + df["n"]
df["Proton Number [Z]"] = df["z"]
df["Neutron Number [N]"] = df["n"]
df["Binding Energy [MeV]"] = df["binding"] / 1000.0
df["Symbol"] = df["symbol"] 
df["Dominant Decay"] = df["decay_1"] 
df["Neutron Seperation"] = df["sn"]
df["Proton Seperation"] = df["sp"]
df["Isospin"] = df["isospin"]
df["Magnetic Dipole"] = df["magnetic_dipole"]
df["Electric Quadrupole"] = df["electric_quadrupole"]
df["Mass Excess"] = df["massexcess"]/1000.0
df["Atomic Mass"] = df["atomic_mass"]/1000.0
df["Half Life"] = df["half_life"]
df["Half Life Unit"] = df["unit_hl"]


df = df[df.z==27]
df["amu"] = df["atomic_mass"] / 1E6
df = df[ ["symbol", "a", "z", "n", "amu", "Half Life", "Half Life Unit"]]
print(df)





fig = px.scatter(df, x="Neutron Number [N]",y="Proton Number [Z]", color="Dominant Decay", 
                 hover_data=["symbol", "Symbol","Neutron Number [N]","Proton Number [Z]",
                             "Binding Energy [MeV]", "Dominant Decay",
                             "Neutron Seperation", "Proton Seperation",
                             "Isospin","Magnetic Dipole",
                             "Electric Quadrupole", "Mass Excess",
                             "Atomic Mass", "Half Life"])
fig.show()

------------------

----- stdout -----
Index(['z', 'n', 'symbol', 'radius', 'unc_r', 'abundance', 'unc_a',
       'energy_shift', 'energy', 'unc_e', 'ripl_shift', 'jp', 'half_life',
       'operator_hl', 'unc_hl', 'unit_hl', 'half_life_sec', 'unc_hls',
       'decay_1', 'decay_1_%', 'unc_1', 'decay_2', 'decay_2_%', 'unc_2',
       'decay_3', 'decay_3_%', 'unc_3', 'isospin', 'magnetic_dipole', 'unc_md',
       'electric_quadrupole', 'unc_eq', 'qbm', 'unc_qb', 'qbm_n', 'unc_qbmn',
       'qa', 'unc_qa', 'qec', 'unc_qec', 'sn', 'unc_sn', 'sp', 'unc_sp',
       'binding', 'unc_ba', 'atomic_mass', 'unc_am', 'massexcess', 'unc_me',
       'me_systematics', 'discovery', 'ENSDFpublicationcut-off',
       'ENSDFauthors', 'Extraction_date', 'a', 'b_over_a'],
      dtype='object')
     symbol   a   z   n        amu Half Life Half Life Unit
535       3  48  27  21  48.001857       NaN            NaN
536       3  50  27  23  49.981117      38.8             ms
537       3  51  27  24  50.970647      68.8             ms
538       3  52  27  25  51.963130       104             ms
539       3  53  27  26  52.954203       240             ms
540       3  54  27  27  53.948459    193.28             ms
541       3  55  27  28  54.941996     17.53              h
542       3  56  27  29  55.939838    77.236              d
543       3  57  27  30  56.936290    271.74              d
544       3  58  27  31  57.935751     70.86              d
545       3  59  27  32  58.933194    STABLE            NaN
546       3  60  27  33  59.933816   1925.28              d
547       3  61  27  34  60.932476     1.649              h
548       3  62  27  35  61.934058      1.54              m
549       3  63  27  36  62.933600      27.4              s
550       3  64  27  37  63.935810      0.30              s
551       3  65  27  38  64.936462      1.16              s
552       3  66  27  39  65.939443      0.20              s
553       3  67  27  40  66.940610     0.425              s
554       3  68  27  41  67.944559      0.20              s
555       3  69  27  42  68.945909       227             ms
556       3  70  27  43  69.950053       112             ms
557       3  71  27  44  70.952367        80             ms
558       3  72  27  45  71.956736      59.9             ms
559       3  73  27  46  72.959238      40.7             ms
560       3  74  27  47  73.963993      31.3             ms
561       3  75  27  48  74.967192        30             ms
562       3  76  27  49  75.972453      21.7             ms
563       3  77  27  50  76.976479      13.0             ms
564       3  78  27  51  77.983553       NaN            NaN
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
Cell [0;32mIn[1], line 56[0m
[1;32m     49[0m df [38;5;241m=[39m df[ [[38;5;124m"[39m[38;5;124msymbol[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124ma[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mz[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mn[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mamu[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mHalf Life[39m[38;5;124m"[39m, [38;5;124m"[39m[38;5;124mHalf Life Unit[39m[38;5;124m"[39m]]
[1;32m     50[0m [38;5;28mprint[39m(df)
[0;32m---> 56[0m fig [38;5;241m=[39m [43mpx[49m[38;5;241;43m.[39;49m[43mscatter[49m[43m([49m[43mdf[49m[43m,[49m[43m [49m[43mx[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mNeutron Number [N][39;49m[38;5;124;43m"[39;49m[43m,[49m[43my[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mProton Number [Z][39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[43mcolor[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mDominant Decay[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m
[1;32m     57[0m [43m                 [49m[43mhover_data[49m[38;5;241;43m=[39;49m[43m[[49m[38;5;124;43m"[39;49m[38;5;124;43msymbol[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mSymbol[39;49m[38;5;124;43m"[39;49m[43m,[49m[38;5;124;43m"[39;49m[38;5;124;43mNeutron Number [N][39;49m[38;5;124;43m"[39;49m[43m,[49m[38;5;124;43m"[39;49m[38;5;124;43mProton Number [Z][39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m     58[0m [43m                             [49m[38;5;124;43m"[39;49m[38;5;124;43mBinding Energy [MeV][39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mDominant Decay[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m     59[0m [43m                             [49m[38;5;124;43m"[39;49m[38;5;124;43mNeutron Seperation[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mProton Seperation[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m     60[0m [43m                             [49m[38;5;124;43m"[39;49m[38;5;124;43mIsospin[39;49m[38;5;124;43m"[39;49m[43m,[49m[38;5;124;43m"[39;49m[38;5;124;43mMagnetic Dipole[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m     61[0m [43m                             [49m[38;5;124;43m"[39;49m[38;5;124;43mElectric Quadrupole[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mMass Excess[39;49m[38;5;124;43m"[39;49m[43m,[49m
[1;32m     62[0m [43m                             [49m[38;5;124;43m"[39;49m[38;5;124;43mAtomic Mass[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[38;5;124;43m"[39;49m[38;5;124;43mHalf Life[39;49m[38;5;124;43m"[39;49m[43m][49m[43m)[49m
[1;32m     63[0m fig[38;5;241m.[39mshow()

File [0;32m/usr/local/lib/python3.11/site-packages/plotly/express/_chart_types.py:66[0m, in [0;36mscatter[0;34m(data_frame, x, y, color, symbol, size, hover_name, hover_data, custom_data, text, facet_row, facet_col, facet_col_wrap, facet_row_spacing, facet_col_spacing, error_x, error_x_minus, error_y, error_y_minus, animation_frame, animation_group, category_orders, labels, orientation, color_discrete_sequence, color_discrete_map, color_continuous_scale, range_color, color_continuous_midpoint, symbol_sequence, symbol_map, opacity, size_max, marginal_x, marginal_y, trendline, trendline_options, trendline_color_override, trendline_scope, log_x, log_y, range_x, range_y, render_mode, title, template, width, height)[0m
[1;32m     12[0m [38;5;28;01mdef[39;00m [38;5;21mscatter[39m(
[1;32m     13[0m     data_frame[38;5;241m=[39m[38;5;28;01mNone[39;00m,
[1;32m     14[0m     x[38;5;241m=[39m[38;5;28;01mNone[39;00m,
[0;32m   (...)[0m
[1;32m     60[0m     height[38;5;241m=[39m[38;5;28;01mNone[39;00m,
[1;32m     61[0m ) [38;5;241m-[39m[38;5;241m>[39m go[38;5;241m.[39mFigure:
[1;32m     62[0m [38;5;250m    [39m[38;5;124;03m"""[39;00m
[1;32m     63[0m [38;5;124;03m    In a scatter plot, each row of `data_frame` is represented by a symbol[39;00m
[1;32m     64[0m [38;5;124;03m    mark in 2D space.[39;00m
[1;32m     65[0m [38;5;124;03m    """[39;00m
[0;32m---> 66[0m     [38;5;28;01mreturn[39;00m [43mmake_figure[49m[43m([49m[43margs[49m[38;5;241;43m=[39;49m[38;5;28;43mlocals[39;49m[43m([49m[43m)[49m[43m,[49m[43m [49m[43mconstructor[49m[38;5;241;43m=[39;49m[43mgo[49m[38;5;241;43m.[39;49m[43mScatter[49m[43m)[49m

File [0;32m/usr/local/lib/python3.11/site-packages/plotly/express/_core.py:2076[0m, in [0;36mmake_figure[0;34m(args, constructor, trace_patch, layout_patch)[0m
[1;32m   2073[0m layout_patch [38;5;241m=[39m layout_patch [38;5;129;01mor[39;00m {}
[1;32m   2074[0m apply_default_cascade(args)
[0;32m-> 2076[0m args [38;5;241m=[39m [43mbuild_dataframe[49m[43m([49m[43margs[49m[43m,[49m[43m [49m[43mconstructor[49m[43m)[49m
[1;32m   2077[0m [38;5;28;01mif[39;00m constructor [38;5;129;01min[39;00m [go[38;5;241m.[39mTreemap, go[38;5;241m.[39mSunburst, go[38;5;241m.[39mIcicle] [38;5;129;01mand[39;00m args[[38;5;124m"[39m[38;5;124mpath[39m[38;5;124m"[39m] [38;5;129;01mis[39;00m [38;5;129;01mnot[39;00m [38;5;28;01mNone[39;00m:
[1;32m   2078[0m     args [38;5;241m=[39m process_dataframe_hierarchy(args)

File [0;32m/usr/local/lib/python3.11/site-packages/plotly/express/_core.py:1485[0m, in [0;36mbuild_dataframe[0;34m(args, constructor)[0m
[1;32m   1482[0m     args[[38;5;124m"[39m[38;5;124mcolor[39m[38;5;124m"[39m] [38;5;241m=[39m [38;5;28;01mNone[39;00m
[1;32m   1483[0m [38;5;66;03m# now that things have been prepped, we do the systematic rewriting of `args`[39;00m
[0;32m-> 1485[0m df_output, wide_id_vars [38;5;241m=[39m [43mprocess_args_into_dataframe[49m[43m([49m
[1;32m   1486[0m [43m    [49m[43margs[49m[43m,[49m[43m [49m[43mwide_mode[49m[43m,[49m[43m [49m[43mvar_name[49m[43m,[49m[43m [49m[43mvalue_name[49m
[1;32m   1487[0m [43m[49m[43m)[49m
[1;32m   1489[0m [38;5;66;03m# now that `df_output` exists and `args` contains only references, we complete[39;00m
[1;32m   1490[0m [38;5;66;03m# the special-case and wide-mode handling by further rewriting args and/or mutating[39;00m
[1;32m   1491[0m [38;5;66;03m# df_output[39;00m
[1;32m   1493[0m count_name [38;5;241m=[39m _escape_col_name(df_output, [38;5;124m"[39m[38;5;124mcount[39m[38;5;124m"[39m, [var_name, value_name])

File [0;32m/usr/local/lib/python3.11/site-packages/plotly/express/_core.py:1210[0m, in [0;36mprocess_args_into_dataframe[0;34m(args, wide_mode, var_name, value_name)[0m
[1;32m   1208[0m         [38;5;28;01mif[39;00m argument [38;5;241m==[39m [38;5;124m"[39m[38;5;124mindex[39m[38;5;124m"[39m:
[1;32m   1209[0m             err_msg [38;5;241m+[39m[38;5;241m=[39m [38;5;124m"[39m[38;5;130;01m\n[39;00m[38;5;124m To use the index, pass it in directly as `df.index`.[39m[38;5;124m"[39m
[0;32m-> 1210[0m         [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m(err_msg)
[1;32m   1211[0m [38;5;28;01melif[39;00m length [38;5;129;01mand[39;00m [38;5;28mlen[39m(df_input[argument]) [38;5;241m!=[39m length:
[1;32m   1212[0m     [38;5;28;01mraise[39;00m [38;5;167;01mValueError[39;00m(
[1;32m   1213[0m         [38;5;124m"[39m[38;5;124mAll arguments should have the same length. [39m[38;5;124m"[39m
[1;32m   1214[0m         [38;5;124m"[39m[38;5;124mThe length of column argument `df[[39m[38;5;132;01m%s[39;00m[38;5;124m]` is [39m[38;5;132;01m%d[39;00m[38;5;124m, whereas the [39m[38;5;124m"[39m
[0;32m   (...)[0m
[1;32m   1221[0m         )
[1;32m   1222[0m     )

[0;31mValueError[0m: Value of 'x' is not the name of a column in 'data_frame'. Expected one of ['symbol', 'a', 'z', 'n', 'amu', 'Half Life', 'Half Life Unit'] but received: Neutron Number [N]

